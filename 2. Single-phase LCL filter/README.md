# Current Control of the Single-phase LCL filter
The first approach to the current control problem will be a single phase grid connected to a controlled voltage source and a LCL filter, as it is illustrated in the image below:

  ![single_lcl](https://github.com/gustavoauler/grid-connected-inverters-control/assets/113851430/227fcbe4-3f52-40aa-acbc-0afda81a5302)

## Using the PI Controller
The conventional solution to this issue typically involves implementing a control block where the feedback signal is the grid current. This block incorporates a PI controller to eliminate the output error, with the controller's output serving as the control signal for the controlled voltage source. This method works, but only if the goal is to create a rectifier. By entering a step reference signal, the PI controller will track the reference, which is not sinusoidal, resulting in a continuous current on the grid. This can be seen in the PSIM simulation located on the 'PI' file named 'LCL_PI_const'.
To generate a sinusoidal current on the grid, it is necessary to create a sinusoidal reference. To do so, the reference signal is built by dividing the voltage signal by it's amplitude, creating a unitary sinusoidal wave in phase with the voltage. After that, simply multiply this wave by the desired amplitude of the grid current. This signal connected to the previous control block will create another problem: The PI is not able to track the sinusoidal entrance, that is, it can not null the output error. This aspect can be seen on the PSIM file located on the 'PI' file named 'LCL_PI_sin'. To solve this problem, it is necessary to add a ressonant controller, that will be detailed in the next section.
## Using the PR (Proportional-Ressonant) Controller
A resonant controller, often combined with a proportional element, earning its nickname as a PR (Proportional Resonant) controller, is a specific type of transfer function commonly implemented in closed-loop control systems exhibiting sinusoidal behavior.
In the context of power electronics, proportional resonant controllers hold significant importance in AC current or voltage controllers due to their performance and straightforward implementation.
In DC applications, PI and PID controllers can provide optimal performance, showcasing zero steady-state error due to their infinite DC gain provided by the integrator in the transfer function. However, in AC applications, these controllers exhibit a delay in tracking their response, preventing zero steady-state error.
Proportional resonant controllers offer a finite yet very high gain at the desired AC frequency, possessing a disturbance rejection characteristic and consequently nullifying the steady-state error. The transfer function representing this controller is given by:
